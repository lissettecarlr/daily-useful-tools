# 漫画预处理与打包工具

## 设计流程

1. 输入漫画文件夹
2. 清理
    * 删除无效图片（这下载客户端经常会出现）
    * 删除非图片内存（同样是这客户端下载后会有些没有的配置文件）
3. 归类压缩
    * 图片数量大于等于150的，属于长篇，包装为`漫画名文件夹/漫画名的压缩包.rar`，放置于`长篇`文件夹中。
    * 图片数据小于150，大于50的，属于中篇，包装为`漫画名的压缩包.rar`，放置于`中篇`文件夹中。
    * 图片数据小于等于50，属于中篇，包装为`漫画名的压缩包.rar`，放置于`短篇`文件夹中。

保存格式：
```
主目录
|--短篇
|--中篇
|--漫画名1
    |--漫画名1.rar
|--漫画名2
    |--漫画名2_1.rar
    |--漫画名2_2.rar
    |--漫画名2_3.rar
```

这里不得不谈下我在`komga`中的目录结构，`短篇`和`中篇`文件夹里虽然可能累积特别多，主要目的是将更新时间不确定的不同集数漫画通过名字筛选出来，当累积到一定集数，则转存成`漫画名2`格式。
这里肯定疑惑为啥这么奇葩的目录结构，那，当然这些漫画不是正规的啊！


## 使用方法

## 安装环境
```bash
pip install -r requirements.txt
```

### 命令行执行

```bash
python src.py [漫画目录路径] [输出目录路径(可选)] [并发数(可选)]
```

例如：
```bash
python src.py D:\漫画
```

参数说明：

- 漫画目录路径：必填，要处理的漫画目录
- 输出目录路径：可选，默认为当前目录
- 并发数：可选，CPU核心数


## 输出说明

程序会在输出目录下创建"分类结果"文件夹，包含三个子文件夹：
- 长篇：图片数量≥150的漫画（以漫画名/漫画名.zip形式保存）
- 中篇：图片数量在50-149之间的漫画（以漫画名.zip形式保存）
- 短篇：图片数量<50的漫画（以漫画名.zip形式保存）


